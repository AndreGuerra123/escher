environment:
  matrix:
    - PYTHON: "C:\\Python27-x64"
      NODEJS_VERSION: "8.3.0"

    - PYTHON: "C:\\Python35-x64"
      NODEJS_VERSION: "8.3.0"

    - PYTHON: "C:\\Python36-x64"
      NODEJS_VERSION: "8.3.0"

install:
  # Add python to PATH
  - "SET PATH=%PYTHON%;%PYTHON%\\Scripts;%PATH%"
  - python --version
  # Set node version
  - ps: "Install-Product node $env:NODEJS_VERSION"
  - node --version
  # Install js packages
  - yarn install
  - yarn bundle
  # Install python packages
  - python -m pip install --upgrade pip
  - cd py
  - python -m pip install -e .
  - cd ..

# For yarn
cache:
  - "%LOCALAPPDATA%\\Yarn"

build: off

test_script:
  - yarn test
  - cd py
  - python -m pytest
  - cd ..

artifacts:
  - path: py\dist\*
