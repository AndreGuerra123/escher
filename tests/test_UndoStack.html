<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>test UndoStack</title>
    <script src="js/lib/d3.v3.js"></script>
    <script data-main="js/config.js" src="js/require.js"></script>
    <meta charset="utf-8"/>
  </head>
  <body>
    <script type="text/javascript">
     require(["builder/UndoStack"], function(UndoStack) {
       var stack = new UndoStack();
       console.assert(stack instanceof UndoStack);
       var stack2 = UndoStack();
       console.assert(stack2 instanceof UndoStack);
       var tracker = 0;
       stack.push(function() { tracker++; });
       stack.undo();
       console.assert(tracker == 1);
       console.log('End of stack:');
       stack.undo();
       tracker = 0;
       for (var i=0; i<43; i++) {
	 stack.push(function() { tracker++; },
		    function() { tracker--; });
       }
       for (var i=1; i<=40; i++) {
	 stack.undo()
	 console.assert(tracker == i);
       }
       console.log('End of stack:');
       stack.undo();
       for (var i=39; i>=0; i--) {
	 stack.redo()
	 console.assert(tracker == i);
       }
       console.log('Top of stack:');
       stack.redo();
     });
    </script>
  </body>
</html>
